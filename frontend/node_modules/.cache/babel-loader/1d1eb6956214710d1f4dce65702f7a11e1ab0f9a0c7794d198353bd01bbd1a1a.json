{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/steph/Documents/EdwinPracticeTool/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _defineProperty from\"C:/Users/steph/Documents/EdwinPracticeTool/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/steph/Documents/EdwinPracticeTool/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/steph/Documents/EdwinPracticeTool/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/steph/Documents/EdwinPracticeTool/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/steph/Documents/EdwinPracticeTool/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';// import styles from '../Css/ReactionForm.module.css';\nimport config from'./config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var QuestionForm=function QuestionForm(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),questions=_useState2[0],setQuestions=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),answers=_useState4[0],setAnswers=_useState4[1];var navigate=useNavigate();useEffect(function(){var fetchQuestions=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(config.API_BASE_URL,\"/api/Questions\"));case 3:result=_context.sent;setQuestions(result.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error('Failed to fetch questions:',_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchQuestions(){return _ref.apply(this,arguments);};}();fetchQuestions();},[]);var handleAnswerChange=function handleAnswerChange(questionId,answerId){setAnswers(function(prevAnswers){return _objectSpread(_objectSpread({},prevAnswers),{},_defineProperty({},questionId,answerId));});};var calculateTotalScore=function calculateTotalScore(){var totalScoreD=0;var totalScoreI=0;var totalScoreS=0;var totalScoreC=0;var _iterator=_createForOfIteratorHelper(questions),_step;try{var _loop=function _loop(){var question=_step.value;var answerId=answers[question.id];if(answerId){var selectedAnswer=question.answers.find(function(answer){return answer.id===answerId;});if(selectedAnswer){totalScoreD+=selectedAnswer.scoreValueD;totalScoreI+=selectedAnswer.scoreValueI;totalScoreS+=selectedAnswer.scoreValueS;totalScoreC+=selectedAnswer.scoreValueC;}}};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}return{scoreValueD:totalScoreD,scoreValueI:totalScoreI,scoreValueS:totalScoreS,scoreValueC:totalScoreC};};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var totalScore,token,_config,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:event.preventDefault();totalScore=calculateTotalScore();_context2.prev=2;token=localStorage.getItem('token');_config={headers:{Authorization:\"Bearer \".concat(token)}};_context2.next=7;return axios.post(\"\".concat(_config.API_BASE_URL,\"/api/TotalScores\"),totalScore,_config);case 7:response=_context2.sent;console.log(response.data);navigate('/dashboard');_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](2);console.error(\"Failed to submit total score:\",_context2.t0);case 15:case\"end\":return _context2.stop();}},_callee2,null,[[2,12]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"form-control\",children:questions.length>0?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[questions.map(function(question){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[question.questionText,/*#__PURE__*/_jsx(\"div\",{className:\"answer-options\",children:question.answers.map(function(answer){return/*#__PURE__*/_jsxs(\"label\",{htmlFor:answer.id.toString(),children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:answer.id.toString(),name:question.id.toString(),value:answer.id,checked:answers[question.id]===answer.id,onChange:function onChange(){return handleAnswerChange(question.id,answer.id);}}),answer.answerText]},answer.id);})})]})},question.id);}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}):/*#__PURE__*/_jsx(\"div\",{children:\"No questions loaded\"})});};export default QuestionForm;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","config","jsx","_jsx","jsxs","_jsxs","QuestionForm","_useState","_useState2","_slicedToArray","questions","setQuestions","_useState3","_useState4","answers","setAnswers","navigate","fetchQuestions","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","get","concat","API_BASE_URL","sent","data","t0","console","error","stop","apply","arguments","handleAnswerChange","questionId","answerId","prevAnswers","_objectSpread","_defineProperty","calculateTotalScore","totalScoreD","totalScoreI","totalScoreS","totalScoreC","_iterator","_createForOfIteratorHelper","_step","_loop","question","value","id","selectedAnswer","find","answer","scoreValueD","scoreValueI","scoreValueS","scoreValueC","s","n","done","err","e","f","handleSubmit","_ref2","_callee2","event","totalScore","token","_config","response","_callee2$","_context2","preventDefault","localStorage","getItem","headers","Authorization","post","log","_x","className","children","length","onSubmit","map","questionText","htmlFor","toString","type","name","checked","onChange","answerText"],"sources":["C:/Users/steph/Documents/EdwinPracticeTool/frontend/src/components/RegisterForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n// import styles from '../Css/ReactionForm.module.css';\r\nimport config from './config';\r\n\r\nconst QuestionForm = () => {\r\n  const [questions, setQuestions] = useState([]);\r\n  const [answers, setAnswers] = useState({});\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchQuestions = async () => {\r\n      try {\r\n        const result = await axios.get(`${config.API_BASE_URL}/api/Questions`);\r\n        setQuestions(result.data);\r\n      } catch (error) {\r\n        console.error('Failed to fetch questions:', error);\r\n      }\r\n    };\r\n    fetchQuestions();\r\n  }, []);\r\n\r\n  const handleAnswerChange = (questionId, answerId) => {\r\n    setAnswers(prevAnswers => ({\r\n      ...prevAnswers,\r\n      [questionId]: answerId\r\n    }));\r\n  };\r\n\r\n  const calculateTotalScore = () => {\r\n    let totalScoreD = 0;\r\n    let totalScoreI = 0;\r\n    let totalScoreS = 0;\r\n    let totalScoreC = 0;\r\n\r\n    for (let question of questions) {\r\n      const answerId = answers[question.id];\r\n      if (answerId) {\r\n        const selectedAnswer = question.answers.find(answer => answer.id === answerId);\r\n        if (selectedAnswer) {\r\n          totalScoreD += selectedAnswer.scoreValueD;\r\n          totalScoreI += selectedAnswer.scoreValueI;\r\n          totalScoreS += selectedAnswer.scoreValueS;\r\n          totalScoreC += selectedAnswer.scoreValueC;\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      scoreValueD: totalScoreD,\r\n      scoreValueI: totalScoreI,\r\n      scoreValueS: totalScoreS,\r\n      scoreValueC: totalScoreC\r\n    };\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const totalScore = calculateTotalScore();\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const config = {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      };\r\n      const response = await axios.post(\r\n        `${config.API_BASE_URL}/api/TotalScores`,\r\n        totalScore,\r\n        config\r\n      );\r\n      console.log(response.data);\r\n\r\n      navigate('/dashboard');\r\n    } catch (error) {\r\n      console.error(\"Failed to submit total score:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={\"form-control\"}>\r\n      {questions.length > 0 ? (\r\n        <form onSubmit={handleSubmit}>\r\n          {questions.map((question) => (\r\n            <div key={question.id}>\r\n              <label>\r\n                {question.questionText}\r\n                <div className=\"answer-options\">\r\n                  {question.answers.map((answer) => (\r\n                    <label htmlFor={answer.id.toString()} key={answer.id}>\r\n                      <input\r\n                        type=\"radio\"\r\n                        id={answer.id.toString()}\r\n                        name={question.id.toString()}\r\n                        value={answer.id}\r\n                        checked={answers[question.id] === answer.id}\r\n                        onChange={() => handleAnswerChange(question.id, answer.id)}\r\n                      />\r\n                      {answer.answerText}\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n              </label>\r\n            </div>\r\n          ))}\r\n          <button type=\"submit\">Submit</button>\r\n        </form>\r\n      ) : (\r\n        <div>No questions loaded</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuestionForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}