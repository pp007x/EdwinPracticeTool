{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/steph/Documents/EdwinPracticeTool/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/steph/Documents/EdwinPracticeTool/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/steph/Documents/EdwinPracticeTool/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// RemoveUser.js\nimport React,{useState,useEffect}from\"react\";import axios from\"axios\";import styles from'../../Css/CompanyDashboard.module.css';import AdminSidebar from'./AdminSidebar';import AdminHeader from'./AdminHeader';// you might want to create separate css module for this component\nimport config from'../../config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RemoveUser(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),companies=_useState2[0],setCompanies=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),selectedCompany=_useState4[0],setSelectedCompany=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),users=_useState6[0],setUsers=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),selectedUser=_useState8[0],setSelectedUser=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isUserRemoved=_useState10[0],setIsUserRemoved=_useState10[1];useEffect(function(){fetchCompanies();},[]);var fetchCompanies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:token=localStorage.getItem('token');_context.next=3;return axios.get(\"\".concat(config.API_BASE_URL,\"/api/Companies\"),{headers:{Authorization:\"Bearer \".concat(token)}});case 3:response=_context.sent;setCompanies(response.data);case 5:case\"end\":return _context.stop();}},_callee);}));return function fetchCompanies(){return _ref.apply(this,arguments);};}();var fetchUsers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(companyId){var token,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:token=localStorage.getItem('token');_context2.next=3;return axios.get(\"\".concat(config.API_BASE_URL,\"/api/Companies/\").concat(companyId,\"/users\"),{headers:{Authorization:\"Bearer \".concat(token)}});case 3:response=_context2.sent;setUsers(response.data);case 5:case\"end\":return _context2.stop();}},_callee2);}));return function fetchUsers(_x){return _ref2.apply(this,arguments);};}();var handleCompanyChange=function handleCompanyChange(e){setSelectedCompany(e.target.value);fetchUsers(e.target.value);};var handleUserChange=function handleUserChange(e){setSelectedUser(e.target.value);};var handleRemoveUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e){var token;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:e.preventDefault();token=localStorage.getItem('token');_context3.next=4;return axios.delete(\"\".concat(config.API_BASE_URL,\"/api/Users/\").concat(selectedUser),{headers:{Authorization:\"Bearer \".concat(token)}});case 4:setIsUserRemoved(true);setSelectedUser(\"\");case 6:case\"end\":return _context3.stop();}},_callee3);}));return function handleRemoveUser(_x2){return _ref3.apply(this,arguments);};}();var Header=function Header(_ref4){var title=_ref4.title;return/*#__PURE__*/_jsxs(\"div\",{className:styles.header,children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:styles['page-title'],children:title})]});};return/*#__PURE__*/_jsxs(\"div\",{className:styles.dashboard,children:[/*#__PURE__*/_jsx(AdminSidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:styles.main,children:[/*#__PURE__*/_jsx(Header,{title:\"Remove user\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.content,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Remove User\"}),isUserRemoved&&/*#__PURE__*/_jsx(\"p\",{children:\"User removed successfully!\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRemoveUser,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Company:\",/*#__PURE__*/_jsxs(\"select\",{className:styles.dropdownMenu,name:\"companyId\",value:selectedCompany,onChange:handleCompanyChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select company\"}),companies&&companies.map(function(company){return/*#__PURE__*/_jsx(\"option\",{value:company.id,children:company.name},company.id);})]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"User:\",/*#__PURE__*/_jsxs(\"select\",{name:\"userId\",className:styles.dropdownMenu,value:selectedUser,onChange:handleUserChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select user\"}),users&&users.map(function(user){return/*#__PURE__*/_jsx(\"option\",{value:user.id,children:user.username},user.id);})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Remove User\"})]})]})]})]});}export default RemoveUser;","map":{"version":3,"names":["React","useState","useEffect","axios","styles","AdminSidebar","AdminHeader","config","jsx","_jsx","jsxs","_jsxs","RemoveUser","_useState","_useState2","_slicedToArray","companies","setCompanies","_useState3","_useState4","selectedCompany","setSelectedCompany","_useState5","_useState6","users","setUsers","_useState7","_useState8","selectedUser","setSelectedUser","_useState9","_useState10","isUserRemoved","setIsUserRemoved","fetchCompanies","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","response","wrap","_callee$","_context","prev","next","localStorage","getItem","get","concat","API_BASE_URL","headers","Authorization","sent","data","stop","apply","arguments","fetchUsers","_ref2","_callee2","companyId","_callee2$","_context2","_x","handleCompanyChange","e","target","value","handleUserChange","handleRemoveUser","_ref3","_callee3","_callee3$","_context3","preventDefault","delete","_x2","Header","_ref4","title","className","header","children","dashboard","main","content","onSubmit","dropdownMenu","name","onChange","map","company","id","user","username","type"],"sources":["C:/Users/steph/Documents/EdwinPracticeTool/frontend/src/components/Admin/AdminRemoveUser.js"],"sourcesContent":["// RemoveUser.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport styles from '../../Css/CompanyDashboard.module.css'; \r\nimport AdminSidebar from './AdminSidebar';\r\nimport AdminHeader from './AdminHeader'; // you might want to create separate css module for this component\r\nimport config from '../../config';\r\n\r\nfunction RemoveUser() {\r\n  const [companies, setCompanies] = useState([]);\r\n  const [selectedCompany, setSelectedCompany] = useState(\"\");\r\n  const [users, setUsers] = useState([]);\r\n  const [selectedUser, setSelectedUser] = useState(\"\");\r\n  const [isUserRemoved, setIsUserRemoved] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchCompanies();\r\n  }, []);\r\n\r\n  const fetchCompanies = async () => {\r\n    const token = localStorage.getItem('token');\r\n    const response = await axios.get(`${config.API_BASE_URL}/api/Companies`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n    setCompanies(response.data);\r\n  };\r\n\r\n  const fetchUsers = async (companyId) => {\r\n    const token = localStorage.getItem('token');\r\n    const response = await axios.get(`${config.API_BASE_URL}/api/Companies/${companyId}/users`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n    setUsers(response.data);\r\n  };\r\n\r\n  const handleCompanyChange = (e) => {\r\n    setSelectedCompany(e.target.value);\r\n    fetchUsers(e.target.value);\r\n  };\r\n\r\n  const handleUserChange = (e) => {\r\n    setSelectedUser(e.target.value);\r\n  };\r\n\r\n  const handleRemoveUser = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const token = localStorage.getItem('token');\r\n    await axios.delete(`${config.API_BASE_URL}/api/Users/${selectedUser}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n    setIsUserRemoved(true);\r\n    setSelectedUser(\"\");\r\n  };\r\n  const Header = ({ title }) => (\r\n    <div className={styles.header}>\r\n      <hr />\r\n      <div className={styles['page-title']}>{title}</div>\r\n    </div>\r\n  );\r\n  return (\r\n    <div className={styles.dashboard}>\r\n        <AdminSidebar />\r\n        <div className={styles.main}>\r\n        <Header title=\"Remove user\" />\r\n\r\n            <div className={styles.content}>\r\n          <h1>Remove User</h1>\r\n          {isUserRemoved && <p>User removed successfully!</p>}\r\n          <form onSubmit={handleRemoveUser}>\r\n            <label>\r\n              Company:\r\n              <select className={styles.dropdownMenu} name=\"companyId\" value={selectedCompany} onChange={handleCompanyChange}>\r\n                <option value=\"\">Select company</option>\r\n                {companies && companies.map((company) => (\r\n                  <option key={company.id} value={company.id}>\r\n                    {company.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </label>\r\n            <label>\r\n              User:\r\n              <select name=\"userId\" className={styles.dropdownMenu} value={selectedUser} onChange={handleUserChange}>\r\n                <option value=\"\">Select user</option>\r\n                {users && users.map((user) => (\r\n                  <option key={user.id} value={user.id}>\r\n                    {user.username}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </label>\r\n            <button type=\"submit\">Remove User</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RemoveUser;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}